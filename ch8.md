1. 요구 페이징
2. 페이지 교체
3. 페이지 프레임의 할당
4. 전역교체, 지역교체
5. 스레싱

### 가상메모리

---

- CPU에서 당장 수행할 부분만 메모리에 올리고 그렇지 않은 부분은 디스크 영역(swap area)에 swap out 했다가 다시 불러온다. 따라서 프로그램은 물리적 메모리 주소를 고려하지 않고 0부터 시작하는 가상의 메모리 구조에 따라 코드를 작성할 수 있다. 이를 **가상메모리** 공간이라고 한다.
- 프로세스의 주소공간을 메모리로 적재하는 단위에 따라
    - 요구 페이징(demand paging)
    - 요구 세그멘테이션(demand segmentation)

### 요구 페이징 시에 캐시 미스가 났을 경우

---

- MMU에 의해 페이징 부재 트랩이 발생하고, 스왑영역에서 필요한 페이지를 찾아서 메모리로 올린다.
- 이 때 기존에 메모리에 있던 페이지가 내려가고 새로운 페이지가 올라오게 된다. 이걸 효율적으로 하기 위한 페이지 교체 알고리즘이 필요하다
    - 가상의 최적 알고리즘(Belady’s optimal algorithm)
    - FIFO
    - LRU - 참조된지 오래된 페이지부터 쫒아낸다
    - LFU - 참조횟수가 적은 페이지를 쫒아낸다
    - 클럭 알고리즘

### 쓰레싱

---

메모리에 너무 많은 프로세스가 동시에 올라가면 페이지폴트가 자주 일어나서 스와핑이 자주 발생하는데요. CPU 이용률이 낮아지기 때문에 OS는 가용성을 높이기 위해 더 많은 프로세스를 메모리에 올립니다. 이러면서 CPU이용률이 더 내려가는 악순환을 쓰레싱이라고 합니다. 

해결방법으로는 메모리를 늘려서 처음부터 많은 프로세스가 메모리에 올라오도록 하거나, 스와핑 속도를 높이기 위해 HDD 대신 SSD를 이용하는 방법이 있습니다. OS적으로 해결하기 위해 작업 세트, PFF를 이용할 수 있습니다. 

작업 세트(working set) - 프로세스의 과거 사용 이력인 지역성locality를 통해 결정된 페이지 집합을 만들어서 미리 메모리에 로드하는 것입니다. 미리 로드하게 되면 탐색비용을 줄이고 스와핑도 줄일 수 있습니다. 

PFF(Page Fault Frequency) - 페이지 폴트 빈도를 조절하는 방법으로 상한선, 하한선을 만드는 방법입니다. 상한선에 도달하면 프레임을 늘리고, 하한선에 도달하면 프레임을 줄이는 방식이다. 